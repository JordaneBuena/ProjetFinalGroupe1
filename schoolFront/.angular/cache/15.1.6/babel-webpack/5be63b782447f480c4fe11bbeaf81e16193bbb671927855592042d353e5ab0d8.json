{"ast":null,"code":"import dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport interactionPlugin from '@fullcalendar/interaction';\nimport { Days } from \"../../model/days.enum\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-bootstrap/modal\";\nimport * as i2 from \"../course.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@fullcalendar/angular\";\nimport * as i7 from \"@angular/cdk/drag-drop\";\nconst _c0 = [\"templateInfo\"];\nconst _c1 = [\"templateAdd\"];\nfunction CalendarComponent_div_4_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 8, 9)(2, \"div\", 10);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ev_r6 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ev_r6.title);\n  }\n}\nfunction CalendarComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, CalendarComponent_div_4_div_1_Template, 4, 1, \"div\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.events);\n  }\n}\nconst _c2 = function (a0) {\n  return [a0];\n};\nfunction CalendarComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"h4\", 12);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function CalendarComponent_ng_template_7_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.modalRef == null ? null : ctx_r8.modalRef.hide());\n    });\n    i0.ɵɵelementStart(4, \"span\", 14);\n    i0.ɵɵtext(5, \"\\u00D7\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"div\", 15)(7, \"form\", 16)(8, \"div\", 17)(9, \"label\", 18);\n    i0.ɵɵtext(10, \"Mati\\u00E8re :\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"input\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 17)(13, \"label\", 20);\n    i0.ɵɵtext(14, \"D\\u00E9but : \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"input\", 21);\n    i0.ɵɵpipe(16, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 17)(18, \"label\", 22);\n    i0.ɵɵtext(19, \"Fin : \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(20, \"input\", 23);\n    i0.ɵɵpipe(21, \"date\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"div\", 17)(23, \"label\", 24);\n    i0.ɵɵtext(24, \"Jour : \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(25, \"input\", 25);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(26, \"div\", 26)(27, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function CalendarComponent_ng_template_7_Template_button_click_27_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.modalRef == null ? null : ctx_r10.modalRef.hide());\n    });\n    i0.ɵɵtext(28, \"Close\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(29, \"button\", 28);\n    i0.ɵɵtext(30, \"Modifier Planning\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.title);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"placeholder\", ctx_r2.title);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"placeholder\", i0.ɵɵpureFunction1(11, _c2, i0.ɵɵpipeBind2(16, 5, ctx_r2.start, \"shortTime\")));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"placeholder\", i0.ɵɵpureFunction1(13, _c2, i0.ɵɵpipeBind2(21, 8, ctx_r2.end, \"shortTime\")));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"placeholder\", ctx_r2.day);\n  }\n}\nfunction CalendarComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 11)(1, \"h4\", 12);\n    i0.ɵɵtext(2, \"Ajouter un cours\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function CalendarComponent_ng_template_9_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.modalRef == null ? null : ctx_r11.modalRef.hide());\n    });\n    i0.ɵɵelementStart(4, \"span\", 14);\n    i0.ɵɵtext(5, \"\\u00D7\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"div\", 15)(7, \"form\", 16)(8, \"div\", 17)(9, \"label\", 29);\n    i0.ɵɵtext(10, \"Mati\\u00E8re :\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(11, \"input\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 17)(13, \"label\", 31);\n    i0.ɵɵtext(14, \"D\\u00E9but : \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(15, \"input\", 32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 17)(17, \"label\", 33);\n    i0.ɵɵtext(18, \"Fin : \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(19, \"input\", 34);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 17)(21, \"label\", 35);\n    i0.ɵɵtext(22, \"Jour : \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(23, \"input\", 36)(24, \"br\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(25, \"div\", 26)(26, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function CalendarComponent_ng_template_9_Template_button_click_26_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.modalRef == null ? null : ctx_r13.modalRef.hide());\n    });\n    i0.ɵɵtext(27, \"Fermer\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"button\", 28);\n    i0.ɵɵtext(29, \"Ajouter\");\n    i0.ɵɵelementEnd()();\n  }\n}\n//export class CalendarComponent implements OnInit, AfterViewInit {\nexport class CalendarComponent {\n  constructor(modalService, cServ, route) {\n    this.modalService = modalService;\n    this.cServ = cServ;\n    this.route = route;\n    this.day = '';\n    this.courses = [];\n    this.events = [];\n    this.container = this.events[0];\n    this.calendarOptions = {\n      plugins: [dayGridPlugin, timeGridPlugin, interactionPlugin],\n      headerToolbar: {\n        left: 'prev today',\n        center: 'title',\n        right: 'next'\n      },\n      buttonText: {\n        today: 'Aujourd\\'hui'\n      },\n      initialView: 'timeGridWeek',\n      weekends: false,\n      nowIndicator: true,\n      slotMinTime: \"08:00:00\",\n      slotMaxTime: \"21:00:00\",\n      locale: 'fr',\n      editable: true,\n      droppable: true,\n      selectable: true,\n      eventSources: [{\n        events: this.events\n      }],\n      eventClick: this.handleDateClick.bind(this),\n      select: this.addEventClick.bind(this),\n      eventDrop: this.dropEvent.bind(this),\n      eventResize: this.resizeEvent.bind(this)\n    };\n    this.config = {\n      animated: true\n    };\n  }\n  ngOnInit() {\n    const id = this.route.snapshot.paramMap.get(\"kId\") || \"\";\n    if (id != '') {\n      this.cServ.findAll().subscribe(v => {\n        // this.courses = v.filter(c => c.klass.id === +id)\n        console.log(v);\n        console.log(Object.values(Days).indexOf(v[0].day) + 1);\n        console.log(Object.values(Days).indexOf(v[1].day) + 1);\n        this.CoursesToEvents();\n        this.calendarOptions.events = this.events;\n      });\n    }\n  }\n  //Edit en event by clicking\n  handleDateClick(arg) {\n    console.log(arg);\n    console.log(arg.event._def.title);\n    this.title = arg.event._def.title;\n    this.start = arg.event.start;\n    this.end = arg.event.end;\n    this.day = arg.event._def.recurringDef.typeData.daysOfWeek[0];\n    switch (arg.event._def.recurringDef.typeData.daysOfWeek[0]) {\n      case '1':\n        {\n          this.day = \"Lundi\";\n          break;\n        }\n      case '2':\n        {\n          this.day = \"Mardi\";\n          break;\n        }\n      case '3':\n        {\n          this.day = \"Mercredi\";\n          break;\n        }\n      case '4':\n        {\n          this.day = \"Jeudi\";\n          break;\n        }\n      case '5':\n        {\n          this.day = \"Vendredi\";\n          break;\n        }\n      default:\n        {\n          //statements;\n          break;\n        }\n    }\n    this.modalRef = this.modalService.show(this.templateInfo, this.config);\n  }\n  dropEvent(info) {\n    if (!confirm(\"Etes-vous sûr.e de vouloir déplacer ce cours ?\")) {\n      info.revert();\n    }\n  }\n  resizeEvent(arg) {\n    console.log(arg.event.end);\n  }\n  //add en event by clicking\n  addEventClick(ard) {\n    //  this.modalRef = this.modalService.show('input[name=start]');\n    //   this.modalRef = this.modalService.find('input[name=evtEnd]').val(\n    //     this.end.format('YYYY-MM-DD HH:mm:ss')\n    //   );\n    //   show modal dialog\n    this.modalRef = this.modalService.show(this.templateAdd, this.config);\n  }\n  /*  ngAfterViewInit(): void {\n      this.container = new ElementRef('external');\n      new Draggable(this.container.nativeElement, {\n        itemSelector: '.fc-event',\n        eventData: (eventEl) => {\n          console.log(eventEl);\n          this.title = eventEl.getAttribute(\"title\");\n  \n          return {\n            title: eventEl.innerText,\n          };\n        },\n      });\n    }*/\n  CoursesToEvents() {\n    let event = [];\n    this.courses.map(c => this.events.push({\n      title: c.subject.name,\n      startTime: c.start,\n      endTime: c.end,\n      backgroundColor: c.subject.color,\n      daysOfWeek: [Object.values(Days).indexOf(c.day) + 1]\n    }));\n  }\n}\nCalendarComponent.ɵfac = function CalendarComponent_Factory(t) {\n  return new (t || CalendarComponent)(i0.ɵɵdirectiveInject(i1.BsModalService), i0.ɵɵdirectiveInject(i2.CourseService), i0.ɵɵdirectiveInject(i3.ActivatedRoute));\n};\nCalendarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CalendarComponent,\n  selectors: [[\"app-calendar\"]],\n  viewQuery: function CalendarComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.templateInfo = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.templateAdd = _t.first);\n    }\n  },\n  inputs: {\n    startInput: \"startInput\",\n    endInput: \"endInput\"\n  },\n  decls: 11,\n  vars: 6,\n  consts: [[\"id\", \"external-event\"], [1, \"card\", \"card-header\"], [1, \"external-event-list\"], [4, \"ngIf\"], [3, \"options\"], [\"templateInfo\", \"\"], [\"templateAdd\", \"\"], [\"class\", \"fc-event\", 4, \"ngFor\", \"ngForOf\"], [1, \"fc-event\"], [\"external\", \"\"], [\"cdkDrag\", \"\", 1, \"card\"], [1, \"modal-header\"], [1, \"modal-title\", \"pull-left\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn-close\", \"close\", \"pull-right\", 3, \"click\"], [\"aria-hidden\", \"true\", 1, \"visually-hidden\"], [1, \"modal-body\"], [\"name\", \"save-event\", \"method\", \"post\"], [1, \"form-group\"], [\"for\", \"title\"], [\"type\", \"text\", \"name\", \"title\", \"id\", \"title\", 3, \"placeholder\"], [\"for\", \"start\"], [\"type\", \"text\", \"name\", \"start\", \"id\", \"start\", 3, \"placeholder\"], [\"for\", \"end\"], [\"type\", \"text\", \"name\", \"end\", \"id\", \"end\", 3, \"placeholder\"], [\"for\", \"day\"], [\"type\", \"text\", \"name\", \"day\", \"id\", \"day\", 3, \"placeholder\"], [1, \"modal-footer\"], [\"type\", \"button\", \"data-dismiss\", \"modal\", 1, \"btn\", \"btn-default\", 3, \"click\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"], [\"for\", \"emptyTitle\"], [\"type\", \"text\", \"name\", \"title\", \"placeholder\", \"Mati\\u00E8re\", \"id\", \"emptyTitle\"], [\"for\", \"emptyStart\"], [\"type\", \"text\", \"name\", \"start\", \"placeholder\", \"Heure de D\\u00E9but\", \"id\", \"emptyStart\"], [\"for\", \"emptyEnd\"], [\"type\", \"text\", \"name\", \"end\", \"placeholder\", \"Heure de fin\", \"id\", \"emptyEnd\"], [\"for\", \"emptyDay\"], [\"type\", \"text\", \"name\", \"day\", \"placeholder\", \"Jour\", \"id\", \"emptyDay\"]],\n  template: function CalendarComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h2\", 1);\n      i0.ɵɵtext(2, \"Liste des cours\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 2);\n      i0.ɵɵtemplate(4, CalendarComponent_div_4_Template, 2, 1, \"div\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(5, \"br\")(6, \"full-calendar\", 4);\n      i0.ɵɵtemplate(7, CalendarComponent_ng_template_7_Template, 31, 15, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(9, CalendarComponent_ng_template_9_Template, 30, 0, \"ng-template\", null, 6, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵstyleProp(\"padding-right\", \"50px\")(\"padding-left\", \"50px\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.events.length > 0);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"options\", ctx.calendarOptions);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.ɵNgNoValidate, i5.NgControlStatusGroup, i6.FullCalendarComponent, i7.CdkDrag, i4.DatePipe],\n  styles: [\"label[_ngcontent-%COMP%]{\\n  display: block;\\n  width: 100px;\\n  float: left;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2FsZW5kYXIvY2FsZW5kYXIuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGNBQWM7RUFDZCxZQUFZO0VBQ1osV0FBVztBQUNiIiwic291cmNlc0NvbnRlbnQiOlsibGFiZWx7XG4gIGRpc3BsYXk6IGJsb2NrO1xuICB3aWR0aDogMTAwcHg7XG4gIGZsb2F0OiBsZWZ0O1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AAEA,OAAOA,aAAa,MAAM,uBAAuB;AACjD,OAAOC,cAAc,MAAM,wBAAwB;AACnD,OAAOC,iBAA8B,MAAM,2BAA2B;AAMtE,SAAQC,IAAI,QAAO,uBAAuB;;;;;;;;;;;;;ICLpCC,iCAA0D;IAC9BA,YAAY;IAAAA,iBAAM;;;;IAAlBA,eAAY;IAAZA,iCAAY;;;;;IAF1CA,2BAA+B;IAC7BA,wEAIM;IACRA,iBAAM;;;;IALiCA,eAAS;IAATA,uCAAS;;;;;;;;;IAWhDA,+BAA0B;IACUA,YAAS;IAAAA,iBAAK;IAChDA,kCACsD;IAA3BA;MAAAA;MAAA;MAAA,uDAASC,sBAAgB;IAAA,EAAC;IACnDD,gCAAiD;IAAAA,sBAAO;IAAAA,iBAAO;IAGnEA,+BAAwB;IAGCA,+BAAS;IAAAA,iBAAQ;IACpCA,6BAAiE;IACnEA,iBAAM;IACNA,gCAAwB;IACHA,8BAAQ;IAAAA,iBAAQ;IACnCA,6BAAqF;;IACvFA,iBAAM;IACNA,gCAAwB;IACDA,uBAAM;IAAAA,iBAAQ;IACrCA,6BAA+E;;IAC/EA,iBAAM;IACVA,gCAAwB;IACHA,wBAAO;IAAAA,iBAAQ;IAChCA,6BAA2D;IAC/DA,iBAAM;IAIVA,gCAA0B;IAC2CA;MAAAA;MAAA;MAAA,wDAASE,uBAAgB;IAAA,EAAC;IAACF,sBAAK;IAAAA,iBAAS;IAC5GA,mCAA8C;IAAAA,kCAAiB;IAAAA,iBAAS;;;;IA7BlCA,eAAS;IAATA,kCAAS;IAUPA,eAAqB;IAArBA,0CAAqB;IAIrBA,eAAyC;IAAzCA,2GAAyC;IAI7CA,eAAuC;IAAvCA,yGAAuC;IAIvCA,eAAmB;IAAnBA,wCAAmB;;;;;;IAavDA,+BAA0B;IACUA,gCAAgB;IAAAA,iBAAK;IACvDA,kCACsD;IAA3BA;MAAAA;MAAA;MAAA,wDAASG,uBAAgB;IAAA,EAAC;IACnDH,gCAAiD;IAAAA,sBAAO;IAAAA,iBAAO;IAGnEA,+BAAwB;IAGQA,+BAAS;IAAAA,iBAAQ;IACzCA,6BAAsE;IAC1EA,iBAAM;IACNA,gCAAwB;IACIA,8BAAQ;IAAAA,iBAAQ;IACxCA,6BAA6E;IACjFA,iBAAM;IACNA,gCAAwB;IACEA,uBAAM;IAAAA,iBAAQ;IACpCA,6BAAuE;IAC3EA,iBAAM;IACNA,gCAAwB;IACEA,wBAAO;IAAAA,iBAAQ;IACrCA,6BAA+D;IACnEA,iBAAM;IAIVA,gCAA0B;IAC2CA;MAAAA;MAAA;MAAA,wDAASI,uBAAgB;IAAA,EAAC;IAACJ,uBAAM;IAAAA,iBAAS;IAC7GA,mCAA8C;IAAAA,wBAAO;IAAAA,iBAAS;;;ADhElE;AACE,OAAM,MAAOK,iBAAiB;EAqD9BC,YAAoBC,YAA2B,EAC3BC,KAAoB,EACpBC,KAAqB;IAFrB,iBAAY,GAAZF,YAAY;IACZ,UAAK,GAALC,KAAK;IACL,UAAK,GAALC,KAAK;IA7CzB,QAAG,GAAY,EAAE;IAIjB,YAAO,GAAa,EAAE;IAEtB,WAAM,GAAU,EAAE;IAElB,cAAS,GAAQ,IAAI,CAACC,MAAM,CAAC,CAAC,CAAC;IAE/B,oBAAe,GAAoB;MACjCC,OAAO,EAAE,CAACf,aAAa,EAAEC,cAAc,EAAEC,iBAAiB,CAAC;MAC3Dc,aAAa,EAAE;QACbC,IAAI,EAAE,YAAY;QAClBC,MAAM,EAAE,OAAO;QACfC,KAAK,EAAE;OACR;MACDC,UAAU,EAAE;QACVC,KAAK,EAAE;OACR;MACDC,WAAW,EAAE,cAAc;MAC3BC,QAAQ,EAAE,KAAK;MACfC,YAAY,EAAE,IAAI;MAClBC,WAAW,EAAE,UAAU;MACvBC,WAAW,EAAE,UAAU;MACvBC,MAAM,EAAE,IAAI;MACZC,QAAQ,EAAE,IAAI;MACdC,SAAS,EAAE,IAAI;MACfC,UAAU,EAAE,IAAI;MAChBC,YAAY,EAAE,CAAC;QAACjB,MAAM,EAAE,IAAI,CAACA;MAAM,CAAC,CAAC;MACrCkB,UAAU,EAAE,IAAI,CAACC,eAAe,CAACC,IAAI,CAAC,IAAI,CAAC;MAC3CC,MAAM,EAAC,IAAI,CAACC,aAAa,CAACF,IAAI,CAAC,IAAI,CAAC;MACpCG,SAAS,EAAC,IAAI,CAACC,SAAS,CAACJ,IAAI,CAAC,IAAI,CAAC;MACnCK,WAAW,EAAC,IAAI,CAACC,WAAW,CAACN,IAAI,CAAC,IAAI;KACvC;IAED,WAAM,GAAE;MACNO,QAAQ,EAAE;KACX;EAQD;EAGAC,QAAQ;IACN,MAAMC,EAAE,GAAG,IAAI,CAAC9B,KAAK,CAAC+B,QAAQ,CAACC,QAAQ,CAACC,GAAG,CAAC,KAAK,CAAC,IAAI,EAAE;IACxD,IAAIH,EAAE,IAAI,EAAE,EAAE;MACZ,IAAI,CAAC/B,KAAK,CAACmC,OAAO,EAAE,CAACC,SAAS,CAACC,CAAC,IAAG;QACjC;QACAC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;QACdC,OAAO,CAACC,GAAG,CAACC,MAAM,CAACC,MAAM,CAAClD,IAAI,CAAC,CAACmD,OAAO,CAACL,CAAC,CAAC,CAAC,CAAC,CAACM,GAAG,CAAC,GAAG,CAAC,CAAC;QACtDL,OAAO,CAACC,GAAG,CAACC,MAAM,CAACC,MAAM,CAAClD,IAAI,CAAC,CAACmD,OAAO,CAACL,CAAC,CAAC,CAAC,CAAC,CAACM,GAAG,CAAC,GAAG,CAAC,CAAC;QACtD,IAAI,CAACC,eAAe,EAAE;QACtB,IAAI,CAACC,eAAe,CAAC3C,MAAM,GAAG,IAAI,CAACA,MAAM;MAC3C,CAAC,CAAC;;EAEN;EAEA;EACAmB,eAAe,CAACyB,GAAO;IACrBR,OAAO,CAACC,GAAG,CAACO,GAAG,CAAC;IAChBR,OAAO,CAACC,GAAG,CAACO,GAAG,CAACC,KAAK,CAACC,IAAI,CAACC,KAAK,CAAC;IACnC,IAAI,CAACA,KAAK,GAAGH,GAAG,CAACC,KAAK,CAACC,IAAI,CAACC,KAAK;IAC/B,IAAI,CAACC,KAAK,GAAEJ,GAAG,CAACC,KAAK,CAACG,KAAK;IAC3B,IAAI,CAACC,GAAG,GAAGL,GAAG,CAACC,KAAK,CAACI,GAAG;IACxB,IAAI,CAACR,GAAG,GAAGG,GAAG,CAACC,KAAK,CAACC,IAAI,CAACI,YAAY,CAACC,QAAQ,CAACC,UAAU,CAAC,CAAC,CAAC;IAC/D,QAAOR,GAAG,CAACC,KAAK,CAACC,IAAI,CAACI,YAAY,CAACC,QAAQ,CAACC,UAAU,CAAC,CAAC,CAAC;MAEvD,KAAK,GAAG;QAAE;UACR,IAAI,CAACX,GAAG,GAAG,OAAO;UAClB;;MAEF,KAAK,GAAG;QAAE;UACR,IAAI,CAACA,GAAG,GAAG,OAAO;UAClB;;MAEJ,KAAK,GAAG;QAAE;UACN,IAAI,CAACA,GAAG,GAAG,UAAU;UACrB;;MAEJ,KAAK,GAAG;QAAE;UACN,IAAI,CAACA,GAAG,GAAG,OAAO;UAClB;;MAEJ,KAAK,GAAG;QAAE;UACN,IAAI,CAACA,GAAG,GAAG,UAAU;UACrB;;MAEF;QACE;UACE;UACA;;IACD;IAGH,IAAI,CAACY,QAAQ,GAAG,IAAI,CAACxD,YAAY,CAACyD,IAAI,CAAC,IAAI,CAACC,YAAY,EAAE,IAAI,CAACC,MAAM,CAAC;EACxE;EAEAhC,SAAS,CAACiC,IAAQ;IAChB,IAAG,CAACC,OAAO,CAAC,gDAAgD,CAAC,EAAC;MAC5DD,IAAI,CAACE,MAAM,EAAE;;EACjB;EAEAjC,WAAW,CAACkB,GAAO;IACjBR,OAAO,CAACC,GAAG,CAACO,GAAG,CAACC,KAAK,CAACI,GAAG,CAAC;EAC5B;EAEA;EACD3B,aAAa,CAACsC,GAAO;IACrB;IACA;IACA;IACA;IACA;IACE,IAAI,CAACP,QAAQ,GAAG,IAAI,CAACxD,YAAY,CAACyD,IAAI,CAAC,IAAI,CAACO,WAAW,EAAE,IAAI,CAACL,MAAM,CAAC;EACtE;EAEF;;;;;;;;;;;;;;EAcEd,eAAe;IACb,IAAIG,KAAK,GAAG,EAAE;IACd,IAAI,CAACiB,OAAO,CAACC,GAAG,CAACC,CAAC,IAAI,IAAI,CAAChE,MAAM,CAACiE,IAAI,CACpC;MACElB,KAAK,EAAEiB,CAAC,CAACE,OAAO,CAACC,IAAI;MACrBC,SAAS,EAAEJ,CAAC,CAAChB,KAAK;MAClBqB,OAAO,EAAEL,CAAC,CAACf,GAAG;MACdqB,eAAe,EAAEN,CAAC,CAACE,OAAO,CAACK,KAAK;MAChCnB,UAAU,EAAE,CAACd,MAAM,CAACC,MAAM,CAAClD,IAAI,CAAC,CAACmD,OAAO,CAACwB,CAAC,CAACvB,GAAG,CAAC,GAAG,CAAC;KACpD,CACF,CAAC;EACJ;;AA7Ja9C,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;QAAjBA,iBAAiB;EAAA6E;EAAAC;IAAA;;;;;;;;;;;;;;;;;;;MCnBhCnF,8BAAsF;MAEvDA,+BAAe;MAAAA,iBAAK;MACjDA,8BAAiC;MAC/BA,kEAMM;MACRA,iBAAM;MACNA,qBAAI;MAGJA,qHAiCY;MAGdA,oHAiCc;MACdA,iBAAM;;;MArFmBA,uCAA8B;MAI7CA,eAAuB;MAAvBA,4CAAuB;MAUhBA,eAA2B;MAA3BA,6CAA2B","names":["dayGridPlugin","timeGridPlugin","interactionPlugin","Days","i0","ctx_r8","ctx_r10","ctx_r11","ctx_r13","CalendarComponent","constructor","modalService","cServ","route","events","plugins","headerToolbar","left","center","right","buttonText","today","initialView","weekends","nowIndicator","slotMinTime","slotMaxTime","locale","editable","droppable","selectable","eventSources","eventClick","handleDateClick","bind","select","addEventClick","eventDrop","dropEvent","eventResize","resizeEvent","animated","ngOnInit","id","snapshot","paramMap","get","findAll","subscribe","v","console","log","Object","values","indexOf","day","CoursesToEvents","calendarOptions","arg","event","_def","title","start","end","recurringDef","typeData","daysOfWeek","modalRef","show","templateInfo","config","info","confirm","revert","ard","templateAdd","courses","map","c","push","subject","name","startTime","endTime","backgroundColor","color","selectors","viewQuery"],"sourceRoot":"","sources":["/Users/jord/Desktop/ProjetFinal/ProjetFinalGroupe1/schoolFront/src/app/calendar/calendar.component.ts","/Users/jord/Desktop/ProjetFinal/ProjetFinalGroupe1/schoolFront/src/app/calendar/calendar.component.html"],"sourcesContent":["import {AfterContentInit, AfterViewInit, Component, ElementRef, Input, OnInit, ViewChild} from '@angular/core';\nimport {CalendarOptions} from \"@fullcalendar/core\";\nimport dayGridPlugin from '@fullcalendar/daygrid';\nimport timeGridPlugin from '@fullcalendar/timegrid';\nimport interactionPlugin, {Draggable} from '@fullcalendar/interaction';\nimport {NgbModalRef} from \"@ng-bootstrap/ng-bootstrap\";\nimport {BsModalService, BsModalRef} from \"ngx-bootstrap/modal\";\nimport {CourseService} from \"../course.service\";\nimport {ActivatedRoute} from \"@angular/router\";\nimport {Course} from \"../../model/course.model\";\nimport {Days} from \"../../model/days.enum\";\n\n@Component({\n\n  selector: 'app-calendar',\n  templateUrl: './calendar.component.html',\n  styleUrls: ['./calendar.component.css']\n})\n//export class CalendarComponent implements OnInit, AfterViewInit {\n  export class CalendarComponent implements OnInit {\n\n  currentModal: NgbModalRef | undefined\n  modalRef?: BsModalRef;\n\n  title:any;\n\n  start : any;\n  end: any;\n\n  day : string = '';\n  @Input() startInput : any;\n  @Input() endInput: any;\n\n  courses: Course[] = []\n\n  events: any[] = []\n\n  container: any = this.events[0];\n\n  calendarOptions: CalendarOptions = {\n    plugins: [dayGridPlugin, timeGridPlugin, interactionPlugin],\n    headerToolbar: {\n      left: 'prev today',\n      center: 'title',\n      right: 'next'\n    },\n    buttonText: {\n      today: 'Aujourd\\'hui'\n    },\n    initialView: 'timeGridWeek',\n    weekends: false,\n    nowIndicator: true,\n    slotMinTime: \"08:00:00\",\n    slotMaxTime: \"21:00:00\",\n    locale: 'fr',\n    editable: true,\n    droppable: true,\n    selectable: true,\n    eventSources: [{events: this.events}],\n    eventClick: this.handleDateClick.bind(this),\n    select:this.addEventClick.bind(this),\n    eventDrop:this.dropEvent.bind(this),\n    eventResize:this.resizeEvent.bind(this)\n  };\n\n  config ={\n    animated: true\n  };\n  @ViewChild('templateInfo') templateInfo!: string;\n\n  @ViewChild('templateAdd') templateAdd!:string;\n\n  constructor(private modalService:BsModalService,\n              private cServ: CourseService,\n              private route: ActivatedRoute){\n  }\n\n\n  ngOnInit():void{\n    const id = this.route.snapshot.paramMap.get(\"kId\") || \"\";\n    if (id != '') {\n      this.cServ.findAll().subscribe(v => {\n        // this.courses = v.filter(c => c.klass.id === +id)\n        console.log(v)\n        console.log(Object.values(Days).indexOf(v[0].day) + 1)\n        console.log(Object.values(Days).indexOf(v[1].day) + 1)\n        this.CoursesToEvents()\n        this.calendarOptions.events = this.events\n      })\n    }\n  }\n\n  //Edit en event by clicking\n  handleDateClick(arg:any){\n    console.log(arg);\n    console.log(arg.event._def.title);\n  this.title = arg.event._def.title;\n    this.start= arg.event.start;\n    this.end = arg.event.end;\n    this.day = arg.event._def.recurringDef.typeData.daysOfWeek[0];\n  switch(arg.event._def.recurringDef.typeData.daysOfWeek[0])\n  {\n    case '1': {\n      this.day = \"Lundi\";\n      break;\n    }\n    case '2': {\n      this.day = \"Mardi\";\n      break;\n    }\n  case '3': {\n      this.day = \"Mercredi\";\n      break;\n    }\n  case '4': {\n      this.day = \"Jeudi\";\n      break;\n    }\n  case '5': {\n      this.day = \"Vendredi\";\n      break;\n    }\n    default:\n      {\n        //statements;\n        break;\n      }\n    }\n\n    this.modalRef = this.modalService.show(this.templateInfo, this.config);\n  }\n\n  dropEvent(info:any):void{\n    if(!confirm(\"Etes-vous sûr.e de vouloir déplacer ce cours ?\")){\n      info.revert(); }\n  }\n\n  resizeEvent(arg:any):void{\n    console.log(arg.event.end);\n  }\n\n  //add en event by clicking\n addEventClick(ard:any):void{\n //  this.modalRef = this.modalService.show('input[name=start]');\n //   this.modalRef = this.modalService.find('input[name=evtEnd]').val(\n //     this.end.format('YYYY-MM-DD HH:mm:ss')\n //   );\n //   show modal dialog\n   this.modalRef = this.modalService.show(this.templateAdd, this.config);\n  }\n\n/*  ngAfterViewInit(): void {\n    this.container = new ElementRef('external');\n    new Draggable(this.container.nativeElement, {\n      itemSelector: '.fc-event',\n      eventData: (eventEl) => {\n        console.log(eventEl);\n        this.title = eventEl.getAttribute(\"title\");\n\n        return {\n          title: eventEl.innerText,\n        };\n      },\n    });\n  }*/\n  CoursesToEvents() {\n    let event = []\n    this.courses.map(c => this.events.push(\n      {\n        title: c.subject.name,\n        startTime: c.start,\n        endTime: c.end,\n        backgroundColor: c.subject.color,\n        daysOfWeek: [Object.values(Days).indexOf(c.day) + 1]\n      }\n    ))\n  }\n}\n","<div id=\"external-event\" [style.padding-right]=\"'50px'\" [style.padding-left]=\"'50px'\">\n\n  <h2 class=\"card card-header\">Liste des cours</h2>\n  <div class=\"external-event-list\">\n    <div *ngIf=\"events.length > 0\">\n      <div class=\"fc-event\" *ngFor=\"let ev of events\" #external>\n        <div class=\"card\" cdkDrag>{{ev.title}}</div>\n\n        <!-- <div class=\"card\" id=\"draggable-el\" data-event='{ev.title:'my_event',\"duration\":\"02:00\"}'</div>-->\n      </div>\n    </div>\n  </div>\n  <br>\n\n  <full-calendar [options]=\"calendarOptions\"></full-calendar>\n  <ng-template #templateInfo>\n    <div class=\"modal-header\">\n      <h4 class=\"modal-title pull-left\">{{title}}</h4>\n      <button type=\"button\" class=\"btn-close close pull-right\"\n              aria-label=\"Close\" (click)=\"modalRef?.hide()\">\n        <span aria-hidden=\"true\" class=\"visually-hidden\">&times;</span>\n      </button>\n    </div>\n    <div class=\"modal-body\">\n      <form name=\"save-event\" method=\"post\">\n        <div class=\"form-group\">\n          <label for=\"title\">Matière :</label>\n          <input type=\"text\" name=\"title\" [placeholder]=\"title\" id=\"title\">\n        </div>\n        <div class=\"form-group\">\n          <label for=\"start\">Début : </label>\n          <input type=\"text\" name=\"start\" [placeholder]=\"[start|date :'shortTime']\" id=\"start\">\n        </div>\n        <div class=\"form-group\">\n              <label for=\"end\">Fin : </label>\n        <input type=\"text\" name=\"end\" [placeholder]=\"[end|date :'shortTime']\" id=\"end\">\n        </div>\n    <div class=\"form-group\">\n        <label for=\"day\">Jour : </label>\n        <input type=\"text\" name=\"day\" [placeholder]=\"day\" id=\"day\">\n    </div>\n    </form>\n\n</div>\n<div class=\"modal-footer\">\n  <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\" (click)=\"modalRef?.hide()\">Close</button>\n  <button type=\"submit\" class=\"btn btn-primary\">Modifier Planning</button>\n</div>\n</ng-template>\n\n\n<ng-template #templateAdd>\n  <div class=\"modal-header\">\n    <h4 class=\"modal-title pull-left\">Ajouter un cours</h4>\n    <button type=\"button\" class=\"btn-close close pull-right\"\n            aria-label=\"Close\" (click)=\"modalRef?.hide()\">\n      <span aria-hidden=\"true\" class=\"visually-hidden\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <form name=\"save-event\" method=\"post\">\n      <div class=\"form-group\">\n          <label for=\"emptyTitle\">Matière :</label>\n          <input type=\"text\" name=\"title\" placeholder=\"Matière\" id=\"emptyTitle\">\n      </div>\n      <div class=\"form-group\">\n          <label for=\"emptyStart\">Début : </label>\n          <input type=\"text\" name=\"start\" placeholder=\"Heure de Début\" id=\"emptyStart\">\n      </div>\n      <div class=\"form-group\">\n          <label for=\"emptyEnd\">Fin : </label>\n          <input type=\"text\" name=\"end\" placeholder=\"Heure de fin\" id=\"emptyEnd\">\n      </div>\n      <div class=\"form-group\">\n          <label for=\"emptyDay\">Jour : </label>\n          <input type=\"text\" name=\"day\" placeholder=\"Jour\" id=\"emptyDay\"><br>\n      </div>\n    </form>\n\n  </div>\n  <div class=\"modal-footer\">\n    <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\" (click)=\"modalRef?.hide()\">Fermer</button>\n    <button type=\"submit\" class=\"btn btn-primary\">Ajouter</button>\n  </div>\n</ng-template>\n</div>\n\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}